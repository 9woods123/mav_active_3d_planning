# Config that builds the mav_active_3d_planning implementation of the nbvp planner (bircher paper)
verbose_modules: true
build_modules_on_init: true
highlight_executed_trajectory: true

max_new_segments: 15
min_new_segments: 15
max_new_tries: 1000
min_new_tries: 0
min_new_value: 0.0001

replan_pos_threshold: 0.15
replan_yaw_threshold: 0.15
    
trajectory_generator:
  collision_optimistic: false 
  collision_radius: 0.7
  
  type: "FeasibleRRT"
  crop_segments: false
  max_extension_range: 1.5
  use_spheric_sampling: true
  maximum_tries: 1000
  sampling_rate: 20.0
  sample_yaw: true
  
  generator_updater:
    type: "GeneratorUpdateNothing"
  
trajectory_evaluator:
  type: "ContinuousYawPlanningEvaluator"
  n_directions: 12
  n_sections_fov: 3
  select_by_value: false
  update_range: 3.0
  update_gain: 0.0
  update_sections_separate: false
  
  following_evaluator:
    type: "VoxelWeightEvaluator"
    clear_from_parents: false
    visualize_sensor_view: true
    accurate_frontiers: true 
    checking_distance: 2.0
    bounding_volume_args: "/target_bounding_volume"

    frontier_voxel_weight: 1.0
    new_voxel_weight: 0.0
    min_impact_factor: 0.01
    ray_angle_x: 0.002454
    ray_angle_y: 0.002681
    use_frontier_voxels: true
     
    sensor_model:
      type: "IterativeRayCaster"
      sampling_time: 0.0
      ray_length: 5.0
      focal_length: 320.0
      resolution_x: 172 # 640-90/172-30/127-22.5 deg fov
      resolution_y: 480
      downsampling_factor: 3.0
      
    cost_computer:
      type: "SegmentTime"
        
    value_computer:
      type: "GlobalNormalizedGain"
      
    next_selector:
      type: "SubsequentBest"
      
    
back_tracker:
  type: "FeasibleRotateReverse"
  turn_rate: 0.79
  update_rate: 0.25
  sampling_rate: 20.0
  n_rotations: 1.0
  stack_size: 10
