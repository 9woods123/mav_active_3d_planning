# Config that builds the mav_active_3d_planning implementation of the nbvp planner (bircher paper)
verbose_modules: true
build_modules_on_init: true
highlight_executed_trajectory: true

max_new_segments: 15
min_new_segments: 15
max_new_tries: 1000
min_new_tries: 0
min_new_value: 0.0001

replan_pos_threshold: 0.15
replan_yaw_threshold: 0.15
    
trajectory_generator:
  collision_optimistic: false 
  collision_radius: 0.7
  
  type: "FeasibleRRT"
  crop_segments: false
  max_extension_range: 1.5
  all_semgents_feasible: false
  maximum_tries: 1000
  sampling_rate: 20.0
  sample_yaw: true
  
  generator_updater:
    type: "RecheckCollision"
  
trajectory_evaluator:
  type: "ContinuousYawPlanningEvaluator"
  n_directions: 12
  n_sections_fov: 3
  select_by_value: false
  update_range: 3.0
  update_gain: 0.0
  update_sections_separate: false
  
  following_evaluator:
    type: "NaiveEvaluator"
    clear_from_parents: false
    visualize_sensor_view: true
    bounding_volume_args: "/target_bounding_volume"
    sensor_model:
      type: "IterativeRayCaster"
      sampling_time: 0.0
      ray_length: 5.0
      focal_length: 320.0
      resolution_x: 172 # 640-90/172-30/127-22.5 deg fov
      resolution_y: 480
      downsampling_factor: 1.0

    cost_computer:
      type: "SegmentLength"
      accumulate: true
      
    value_computer:
      type: "AccumulateValue"
      following_value_computer:
        type: "ExponentialDiscount"
        cost_scale: 0.5
        accumulate: false
      
    next_selector:
      type: "SubsequentBest"
      
    evaluator_updater:
      type: "UpdateAll"
      update_gain: true
      update_cost: true
      update_value: true
    
back_tracker:
  type: "FeasibleRotateReverse"
  turn_rate: 0.79
  update_rate: 0.25
  sampling_rate: 20.0
  n_rotations: 1.0
  stack_size: 10
